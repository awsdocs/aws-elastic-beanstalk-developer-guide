# Using Elastic Beanstalk with Amazon RDS<a name="AWSHowTo.RDS"></a>

You can use Elastic Beanstalk with Amazon Relational Database Service \(Amazon RDS\) to set up, operate, and scale a relational database\. There are two options to get started, which are the following\. 
+ Create a new database in Amazon RDS\.
+ Start with a database that was previously [created by Elastic Beanstalk](using-features.managing.db.md) and subsequently [decoupled](using-features.managing.db.md#using-features.decoupling.db) from a Beanstalk environment\. For more information, see [Adding a database to your Elastic Beanstalk environment](using-features.managing.db.md)\. 

You can use either approach to run a database instance in Amazon RDS and configure your application to connect to it on launch\. You can connect multiple environments to a database and also perform seamless updates with blue\-green deployments\.

**Note**  
If you haven't used a database instance with your application before, we recommend that you add a database to a test environment with the Elastic Beanstalk console first\. By doing this, you can verify that your application can read the environment properties, construct a connection string, and connect to a database instance, without the additional configuration work required for a standalone database\. For more information, see [Adding a database to your Elastic Beanstalk environment](using-features.managing.db.md)\.

To allow the Amazon EC2 instances in your environment to connect to an outside database, configure an additional security group for the Auto Scaling group that's associated with your environment\. You can attach the same security group that's attached to your database instance\. Or, you can use a separate security group\. If you attach a different security group, you must configure the security group that's attached to your database to allow inbound access from this security group\.

**Note**  
You can connect your environment to a database by adding a rule to the security group that's attached to your database\. This rule must allow inbound access from the autogenerated security group that Elastic Beanstalk attaches to the Auto Scaling group for your environment\. However, know that, by creating this rule, you also create a dependency between the two security groups\. Subsequently, when you attempt to terminate the environment, Elastic Beanstalk will be unable to delete the environment's security group, because the database's security group is dependent on it\.

After you launch your database instance and configure security groups, you can pass the connection information, such as the endpoint and password, to your application by using environment properties\. This is the same mechanism that Elastic Beanstalk uses in the background when you run a database instance in your environment\.

For an additional layer of security, you can store your connection information in Amazon S3, and configure Elastic Beanstalk to retrieve it during deployment\. With [configuration files \(`.ebextensions`\)](ebextensions.md), you can configure the instances in your environment to securely retrieve files from Amazon S3 when you deploy your application\.

**Topics**
+ [Launching and connecting to an external Amazon RDS instance in a default VPC](rds-external-defaultvpc.md)
+ [Launching and connecting to an external Amazon RDS instance in EC2 classic](rds-external-ec2classic.md)
+ [Storing the connection string in Amazon S3](rds-external-credentials.md)
+ [Cleaning up an external Amazon RDS instance](#rds-external-cleanup)

## Cleaning up an external Amazon RDS instance<a name="rds-external-cleanup"></a>

When you connect an external Amazon RDS instance to your Elastic Beanstalk environment, the database instance isn't dependent upon your environment's lifecycle, and, therefore, it isn't deleted when you terminate your environment\. To ensure that personal information that you might have stored in the database instance isn't unnecessarily retained, delete any records that you don't need anymore\. Alternatively, delete the database instance\.